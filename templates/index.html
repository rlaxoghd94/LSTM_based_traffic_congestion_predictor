<!DOCTYPE html>
<html lang='ko'>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
        <title>교통정체량확인기</title>
        <script src="./static/jquery-1.9.1.js"></script>
        <script type="text/javascript" src="https://openapi.map.naver.com/openapi/maps3.js?oss=true&amp;submodules=panorama"></script>
    </head>

    
    <body>
        <h1>Traffic Congestion Prediction Semantic Web</h1>
        <div id="map" style="width:70%;height:400px;" align="center"></div>
        <code id="snippet" class="snippet"></code>
        <script id="code">
            var map = new naver.maps.Map('map', {
                                 center: new naver.maps.LatLng(37.5666805, 126.9784147),
                                 zoom: 5,
                                 mapTypeId: naver.maps.MapTypeId.NORMAL
                                 });
            var infowindow = new naver.maps.InfoWindow();
            function onSuccessGeolocation(position) {
                  var location = new naver.maps.LatLng(position.coords.latitude,
                                                      position.coords.longitude);
                                                      
                  map.setCenter(location); // 얻은 좌표를 지도의 중심으로 설정합니다.
                  map.setZoom(10); // 지도의 줌 레벨을 변경합니다.
                  infowindow.setContent('<div style="padding:5px;">' + 'Current Location' + '</div>'); //geolocation.getCurrentPosition() 위치
                  infowindow.open(map, location);
                  console.log('Coordinates: ' + location.toString());
                                }
        function onErrorGeolocation() {
            var center = map.getCenter();
            infowindow.setContent('<div style="padding:20px;">' +
                                  '<h5 style="margin-bottom:5px;color:#f00;">Geolocation failed!</h5>'+ "latitude: "+ center.lat() +"<br />longitude: "+ center.lng() +'</div>');
                                  infowindow.open(map, center);
        }
        $(window).on("load", function() {
                     if (navigator.geolocation) {
                     navigator.geolocation.getCurrentPosition(onSuccessGeolocation, onErrorGeolocation);
                     } else {
                     var center = map.getCenter();
                     infowindow.setContent('<div style="padding:20px;"><h5 style="margin-bottom:5px;color:#f00;">Geolocation not supported</h5></div>');
                     infowindow.open(map, center);
                     }
                     });
            </script>
    </body>
</html>
